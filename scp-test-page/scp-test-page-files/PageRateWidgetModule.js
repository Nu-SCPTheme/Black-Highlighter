WIKIDOT.modules.PageRateWidgetModule={};WIKIDOT.modules.PageRateWidgetModule.vars={};WIKIDOT.modules.PageRateWidgetModule.listeners={rate:function(d,a,b){var c=new Object();c.action="RateAction";c.event="ratePage";c.points=a;if(b){c.force="yes"}c.pageId=WIKIREQUEST.info.pageId;WIKIDOT.modules.PageRateWidgetModule.vars.points=a;OZONE.ajax.requestModule(null,c,WIKIDOT.modules.PageRateWidgetModule.callbacks.rate)},cancelVote:function(b){var a=new Object();a.action="RateAction";a.event="cancelVote";a.pageId=WIKIREQUEST.info.pageId;OZONE.ajax.requestModule(null,a,WIKIDOT.modules.PageRateWidgetModule.callbacks.rate)}};WIKIDOT.modules.PageRateWidgetModule.callbacks={rate:function(b){if(b.status=="already_voted"){var a=new OZONE.dialogs.Dialog();a.content=b.body;a.show();return}if(!WIKIDOT.utils.handleError(b)){return}OZONE.dialog.cleanAll();if(b.type=="PM"){if(b.points>0){b.points="+"+b.points}$j.each([$j(".prw54353"),$j(".prw54354"),$j("#prw54355")],function(c,d){if(d.length){$j(d).fadeIn();$j(d).html(b.points)}})}else{$j(".page-rate-widget-start").each(function(c){$j(this).attr("data-rating",b.points)});$j(".page-rate-widget-start-text .page-rate-widget-start-text-rating").each(function(c){$j(this).html(b.points)});$j(".page-rate-widget-start-text .page-rate-widget-start-text-rating-votes").each(function(c){$j(this).html(b.votes)});$j(".page-rate-widget-start-text .page-rate-widget-start-text-rating-percent").each(function(c){$j(this).html(b.percent)});$j("#prw54355").html("+"+b.points);$j(".page-rate-widget-start").raty({path:"/common--images/jquery-raty/",score:function(){return $j(this).attr("data-rating")},click:function(d,c){WIKIDOT.modules.PageRateWidgetModule.listeners.rate("event",d)},hints:["Poor","Fair","Good","Very Good","Excellent"]})}}};WIKIDOT.modules.PageRateWidgetModule.init=function(){OZONE.dom.onDomReady(function(){if($("membership-by-apply-text")){var b=$("prw54355");if(b){var a=b.innerHTML;if(a>0){a="+"+a.replace(/\+/,"")}$j("#prw54354").html(a)}}},"dummy-ondomready-block");$j(function(){if($j(".page-rate-widget-start")){$j(".page-rate-widget-start").raty({path:"/common--images/jquery-raty/",score:function(){return $j(this).attr("data-rating")},click:function(b,a){WIKIDOT.modules.PageRateWidgetModule.listeners.rate("event",b)},hints:["Poor","Fair","Good","Very Good","Excellent"]})}})};WIKIDOT.modules.PageRateWidgetModule.init();